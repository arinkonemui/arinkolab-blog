---
title: "SQL整形ツールを作った話"
date: 2026-02-05
draft: false
slug: "made-sql-formatter-tool"
description: "業務でのSQL確認作業を効率化するため、AIを活用してSQL整形ツールを開発。既存ツールでは対応できない複雑な構文にも対応した、自分仕様のツール開発体験記です。"
tags: ["AI", "SQL", "ツール開発", "プログラミング", "開発体験"]
categories: ["技術"]
---

## きっかけ：読めないSQLとの戦い

お仕事でテストをしていて、どうも変な結果が出てくる…。  
システムが表示してくれるSQLを見てみると、とっても長いかつ、改行されていないので読むだけでとても時間がかかってしまいます。  

可読性を上げるために、ネット上にあるSQL整形ツールを使ってみるものの、長かったり複雑な構文があるとまともに整形してくれない…。  

こうなったら自分の想像通りの整形をしてくれるツールを作った方がよさそうだなと思い、作ってみることにしました。  

## まずは簡単な仕様を投げてみる

とりあえずChatGPT君に簡単仕様を伝えて送信。  

>SQLの整形ツールを作りたいと考えています。  
>1.各SQL言語に対応できるようにする。  
>2.業務でも使うため、サーバー送信などの処理はNG。  
>3.使い方は見てわかるようシンプルに。  
>上記条件を満たせるツールのひな型を作ってみてください。  

![仕様を伝える](https://media.arinkolab.com/blog/img/2026-02-05_made-sql-formatter-tool/01.png)

## 早速コードが生成される

早速HTMLの文言が出てきたので中身を確認。  
なんとなくそれっぽい感じのが出てきました。  

![生成されたツール画面](https://media.arinkolab.com/blog/img/2026-02-05_made-sql-formatter-tool/02.png)

機能だけなのでシンプル。  
色が黒っぽいのはどうやらChatGPT君の好みらしい…。  
ChatGPTは指定しないとこの雰囲気にしがちな様子。

まぁ自分で使うのがメインのつもりなので、雰囲気は良しとしよう。  

## 細かな仕様の詰め

次は念のため仕様の質問と現状の確認。  

- CASE WHEN の整形について
- JOINなどのインデントについて
- コメントを維持するか
- 文法エラーっぽいSQLはどうする？

等々、細かな仕様を相談しつつ、コード修正を手伝ってもらいながら、SQLは自分で適当に長めの文を作って何度も作成、テストを繰り返して納得できる形で整形されるまで繰り返しました。  

## 機能追加：SQL作成補助

一旦整形については完了。  
ただ、このままだとちょっとつまらないので、ついでにSQL作成の補助も手伝ってもらおうと思いました。  

「あまり使わないけど簡単なSQL構文ってたまにド忘れすることありますよね？そのためです(笑)。」  

てなわけで再度追加で依頼。  

>次ですが、別のタブとしてSQL作成のページも一緒に作ってしまいたいと思います。  
>SELECT、UPDATE、CREATE、INSERTに対応できるようにしてください。

![SQL作成補助機能の追加依頼](https://media.arinkolab.com/blog/img/2026-02-05_made-sql-formatter-tool/03.png)

## 細かな調整とテスト

それっぽいものができましたが、実際に使ってみると気になる点がいくつか。  

- 括弧をいれてグループ化ができない
- ISNULL、ISNOTNULLの時に値の入力ができてしまう
- ORDERBYぐらい入れたいよね。

等々、実際に使うならば気になる所がそれなりにはあったのでそれぞれ目で確認し、想定通りに作れるか一つ一つチェックをしていきました。  

ただ、大まかな動きはすぐに作ってもらえたので、実質半日ぐらいの時間で作成できました。  
（この程度でも完全に手で作っていたら慣れてない僕だとどれぐらいかかっていたのやら…）

![生成されたSQL作成ツール画面](https://media.arinkolab.com/blog/img/2026-02-05_made-sql-formatter-tool/04.png)

## コードを読めるとはいえ、分野的には素人でもすぐできた

今回、業務で困っていたSQL整形の問題を解決するために、自分専用のツールを作成しました。  

既存のツールでは対応できなかった複雑な構文も、自分の想定通りに整形できるようになり、作業効率も格段に上がりました。  
さらに、SQL作成補助機能も追加したことで、ちょっとしたSQL構文のド忘れにも対応できる便利なツールになりました。  

AI君と対話しながら開発することで、細かな仕様の調整やテストを繰り返しながら、自分にとって使いやすいツールを作ることができました。  
もしも、完全に自分で作っていたら、フロントエンドの実装に不慣れな僕では完成までにどれだけ時間がかかったのやら…。  

Web上に公開する作業を含めても1日かかっていません。

このレベルですぐに実装ができるなら、必要なものがあったら自分で作ってしまった方がよくないか？  
と最近は思い始めています。
